# 事実経過

:CATEGORIES: 情報公開捜査資料（2020年）

 - title: "gh2020kk／金沢西警察署／ブロクの削除を求められた金沢西警察署の対応，珠洲警察署能登庁舎での聴取／事実経過"
 - author: 廣野秀樹
 - date: 2020-05-21 16:16:03 +0900
 - abstract: 平成４年の傷害・準強姦被告事件につき、弁護士の犯罪関与で適正な刑事手続が行われなかったことを理由とする非常上告を検事総長に対する職権発動として求める上申書
 - FILE_NAME: 事実経過.md
 - 記事タイトル名の文字数：56　保存ファイル名の文字数：7

# 2019年

## 5月

### 2019年5月5日にバイクで行った七尾市の青柏祭，10年ぶりの羽咋市内，気多大社，妙成寺，羽咋市のゴミ処理場

:CATEGORIES: 羽咋市

 - 2020年05月17日09：37記録＼法務検察・石川県警察宛＼写真資料：2020-05-07_225523〜2020-05-17_091922：71件 - Google フォト https://photos.google.com/share/AF1QipPBb1s7PUlNHfh4xB6wciep37LNStvy0zkgkQi6C1Nbzoo-jOu-gvKjPl6-hI3T5w?key=YWx3cG56UlhacGFSV2h0aUpTX2xISjBmRm1FZGF3  

　まず，先日，Googleフォトで作成したアルバムをリンク公開にしました。これは別に次のブログ記事を作成，公開していて，同じファイルをGoogleフォトに取り込みアルバムにしたものです。

 - 2020年05月17日09時37分の登録： 2020年05月17日09：37記録＼法務検察・石川県警察宛＼写真資料：2020-05-07_225523〜2020-05-17_091922：71件 http://hiirono-kk2020.blogspot.com/2020/05/2020051709372020-05-072255232020-05.html

 　今回は写真の数も多くなるのでブログ記事を作成することはなく，Googleフォトでアルバムを作成し，リンク公開にします。2019年5月であれば，別に作成したブログ記事があり，自作のppコマンドでの検索も可能となっているかもしれません。確認してみます。

 ```
 [4148]  % pp -p |grep 羽咋市
[link:] 2018-08-28_114814＿テレビの画面・きのう羽咋で交通事故　副市長逮捕で市長陳謝　羽咋市.jpg  http://hirono2014sk.blogspot.com/2018/08/2018083115142018-08-262143542018-08.html#20180828114814
[link:] 2018-08-28_114823＿テレビの画面・きのう羽咋で交通事故　副市長逮捕で市長陳謝　羽咋市.jpg  http://hirono2014sk.blogspot.com/2018/08/2018083115142018-08-262143542018-08.html#20180828114823
[link:] 2018-08-28_114851＿テレビの画面・きのう羽咋で交通事故　副市長逮捕で市長陳謝　羽咋市.jpg  http://hirono2014sk.blogspot.com/2018/08/2018083115142018-08-262143542018-08.html#20180828114851
[link:] 2018-08-28_114901＿テレビの画面・きのう羽咋で交通事故　副市長逮捕で市長陳謝　羽咋市.jpg  http://hirono2014sk.blogspot.com/2018/08/2018083115142018-08-262143542018-08.html#20180828114901
[link:] 2018-08-28_114910＿テレビの画面・きのう羽咋で交通事故　副市長逮捕で市長陳謝　羽咋市.jpg  http://hirono2014sk.blogspot.com/2018/08/2018083115142018-08-262143542018-08.html#20180828114910
[link:] 2018-11-07_205600＿テレビの画面・ガゾリン盗み自分の車で使用　志賀町の２１歳の男を逮捕　羽咋市内の漁港で小型ボートから.jpg  http://hirono2014sk.blogspot.com/2018/11/2018110816412018-11-071428322018-11.html#20181107205600
[link:] 2018-11-07_205606＿テレビの画面・ガゾリン盗み自分の車で使用　志賀町の２１歳の男を逮捕　羽咋市内の漁港で小型ボートから.jpg  http://hirono2014sk.blogspot.com/2018/11/2018110816412018-11-071428322018-11.html#20181107205606
[link:] 2018-11-07_205616＿テレビの画面・ガゾリン盗み自分の車で使用　志賀町の２１歳の男を逮捕　羽咋市内の漁港で小型ボートから.jpg  http://hirono2014sk.blogspot.com/2018/11/2018110816412018-11-071428322018-11.html#20181107205616
[link:] 2018-11-07_205630＿テレビの画面・ガゾリン盗み自分の車で使用　志賀町の２１歳の男を逮捕　羽咋市内の漁港で小型ボートから.jpg  http://hirono2014sk.blogspot.com/2018/11/2018110816412018-11-071428322018-11.html#20181107205630
[link:] 2018-11-07_205634＿テレビの画面・ガゾリン盗み自分の車で使用　志賀町の２１歳の男を逮捕　羽咋市内の漁港で小型ボートから.jpg  http://hirono2014sk.blogspot.com/2018/11/2018110816412018-11-071428322018-11.html#20181107205634
[link:] 2018-11-07_205638＿テレビの画面・ガゾリン盗み自分の車で使用　志賀町の２１歳の男を逮捕　羽咋市内の漁港で小型ボートから.jpg  http://hirono2014sk.blogspot.com/2018/11/2018110816412018-11-071428322018-11.html#20181107205638
[link:] 2018-11-07_205644＿テレビの画面・ガゾリン盗み自分の車で使用　志賀町の２１歳の男を逮捕　羽咋市内の漁港で小型ボートから.jpg  http://hirono2014sk.blogspot.com/2018/11/2018110816412018-11-071428322018-11.html#20181107205644
[link:] 2018-11-07_205658＿テレビの画面・ガゾリン盗み自分の車で使用　志賀町の２１歳の男を逮捕　羽咋市内の漁港で小型ボートから.jpg  http://hirono2014sk.blogspot.com/2018/11/2018110816412018-11-071428322018-11.html#20181107205658

 ```

 　数はいくつかありますが，羽咋市をキーワードにした画像，写真のブログの記録は2種類のみでした。ずっと使っていたBloggerのブログで写真・画像のアップロードができなくなり，それからそのブログでは写真・画像投稿をしなくなってのです。

 　BloggerはGoogleのネットサービスの１つなのですが，ブログにアップロードした写真・画像ファイルは，Googleフォトの特定のアルバムとして保存されるらしく，どうも収録数が限界に達したような感じでした。調べても情報は見つからなかったとも思います。

 ```
(py37_env) Diginnos-PC:~/git/gh2020kk/金沢西警察署/ブロクの削除を求められた金沢西警察署の対応，珠洲警察署能登庁舎での聴取
[4154]  % pp -p 2>/dev/null |head -n 6
[link:] 2018-04-19-092106_モトケン　@motoken_tw　27分27分前　返信先：@sd_tricks_katoさん　　それじゃあ、権力の甘き香りを味わえないじゃ.jpg  http://hirono2014sk.blogspot.com/2018/05/2018050418302018-04-19-0921062018-05-04.html#20180419092106
[link:] 2018-04-19-142729_ツイートアクティビティYour　Tweets　earned　2,015　impressions　over　the　last　week.jpg  http://hirono2014sk.blogspot.com/2018/05/2018050418302018-04-19-0921062018-05-04.html#20180419142729
[link:] 2018-04-20-070501_ツイートアクティビティYour　Tweets　earned　1,724　impressions　over　the　last　24　hours.jpg  http://hirono2014sk.blogspot.com/2018/05/2018050418302018-04-19-0921062018-05-04.html#20180420070501
[link:] 2018-04-20-225321_深澤諭史さんがリツイート：　深澤先生！こういうのはデマの方が広がりやすかったりしがちなので、タイムリーなツイートが大事ですもんね。他の先生方.jpg  http://hirono2014sk.blogspot.com/2018/05/2018050418302018-04-19-0921062018-05-04.html#20180420225321
[link:] 2018-04-20-231602_ShokoEgawa：　【ご注意】セクハラの被害者の写真や名前をさらすツイートは、その内容を問わず、ツイッター社に通報します。.jpg  http://hirono2014sk.blogspot.com/2018/05/2018050418302018-04-19-0921062018-05-04.html#20180420231602
[link:] 2018-04-21-100545_櫻井光政：　櫻井光政さんが深澤諭史をリツイートしました最も訳が分からないのは筆者の論旨である。.jpg  http://hirono2014sk.blogspot.com/2018/05/2018050418302018-04-19-0921062018-05-04.html#20180421100545
(py37_env) Diginnos-PC:~/git/gh2020kk/金沢西警察署/ブロクの削除を求められた金沢西警察署の対応，珠洲警察署能登庁舎での聴取
[4155]  % pp -p 2>/dev/null |tail -n 6
[link:] 2019-12-16_200337＿.jpg  http://hirono2014sk.blogspot.com/2019/12/2019121815062019-11-092218062019-12.html#20191216200337
[link:] 2019-12-16_200711＿どんたく宇出津店　天然ブリ刺身（１０ｋ）鳥取県産　半額で２４０円.jpg  http://hirono2014sk.blogspot.com/2019/12/2019121815062019-11-092218062019-12.html#20191216200711
[link:] 2019-12-16_200714＿.jpg  http://hirono2014sk.blogspot.com/2019/12/2019121815062019-11-092218062019-12.html#20191216200714
[link:] 2019-12-16_200746＿百均で買ってきた陶器のカップ.jpg  http://hirono2014sk.blogspot.com/2019/12/2019121815062019-11-092218062019-12.html#20191216200746
[link:] 2019-12-16_200808＿どんたく宇出津店　スギヨ　かにかま.jpg  http://hirono2014sk.blogspot.com/2019/12/2019121815062019-11-092218062019-12.html#20191216200808
[link:] 2019-12-16_201213＿どんたく宇出津店　松茸御膳弁当　半額で２４９円.jpg  http://hirono2014sk.blogspot.com/2019/12/2019121815062019-11-092218062019-12.html#20191216201213
(py37_env) Diginnos-PC:~/git/gh2020kk/金沢西警察署/ブロクの削除を求められた金沢西警察署の対応，珠洲警察署能登庁舎での聴取
[4156]  % pp -p |wc -l
73878
 ```

 　自作のppコマンドは，ブログ記事の写真のページ内リンクをファイル名とともに登録したデータベースの情報を読み出すものです。一度に全てのデータが表示されますが，これもテキストファイルなので，他のコマンドにパイプで渡し，処理をしています。

 　headコマンドは先頭から，オプション無しだと10行が表示されます。tailコマンドは最終行からの表示になります。テキストファイルを指定することが多いですが，パイプで渡された出力もファイルと同様に扱えます。

 　そのパイプで渡されたデータのサイズが大きすぎるとエラーが出ることがあるので，「2>/dev/null」という処理を加え，標準エラー出力を捨てています。

 ```
こんにちは。
head コマンドは、長大な標準出力をパイプラインで受け取って使うと、打ち切りを行うので、Broken pipe エラーが起きてエラー出力が目障りかもしれません。

対処方法は、エラー出力を捨てるか、打ち切られてもエラーを出力しないコマンドを挟むかなどがあるようです。


$ 長大な標準出力 2>/dev/null | head
$ 長大な標準出力 | tail -n +1 | head

［source：］head コマンド（Broken pipe エラー） - Qiita https://qiita.com/kkdd/items/f9829af2fbb9c3c980da
```

　最初の記録が，「[link:] 2018-04-19-092106_モトケン　@motoken_tw　27分27分前　返信先：@sd_tricks_katoさん　　それじゃあ、権力の甘き香りを味わえないじゃ.jpg  http://hirono2014sk.blogspot.com/2018/05/2018050418302018-04-19-0921062018-05-04.html#20180419092106 」でした。

　ほとんど記憶になかったモトケンこと矢部善朗弁護士（京都弁護士会）のツイートの記録のようですが，「甘き死よ来たれ」という曲のことを思い出しました。2ヶ月ほど前にも何かで思い出し，久しぶりにYouTubeで聴いたのですが，そのあとすっかり忘れていました。

 - 甘き死よ、来たれ - YouTube https://www.youtube.com/watch?v=JDoUX4rNHig  

 　初めて視聴したYouTube動画ですが，画面がずっと黒く，おかしいと思っていたら歌いだしと同時に白地で英語の歌詞が表示されだしました。2009年3月に羽咋市から戻ったあとにRailsの勉強と一緒によく聴いた思い出の曲です。

 　宇宙をイメージさせるエヴァンゲリオンの曲ですが，羽咋市も宇宙やUFOをアピールしていることを思い出しました。歴史的な根拠もあるような話をテレビで見たこともあります。

 　この前，オフにしていたと思うYouTubeの自動再生が始まって，同じ曲ですが違う動画が再生されました。同じように背景が無地だったのですが，「甘き死よ，来たれ」の英語の歌詞に，日本語の歌詞も出ていました。それもこれまでに見たのとは違う翻訳です。

  - 甘き死よ、来たれ 神画質（フルHD） - YouTube https://www.youtube.com/watch?v=AnGpB_Wj3dQ  

  　ツイートのまとめ記事も見つけました。特定のBloggerのブログ記事をデータベースに登録したもので，それを読み出す自作コマンドになります。

  ```
  [4157]  % dp -p|grep それじゃあ、権力の甘き香りを味わえないじゃ
 - 2018年04月19日09時20分の登録： ＼モトケン　@motoken_tw＼それじゃあ、権力の甘き香りを味わえないじゃないですか。 http://hirono2014sk.blogspot.com/2018/04/motokentw_51.html
```

- RT kk_hirono（再捜査要請書＿警察庁・石川県警察御中）｜sd_tricks_kato（KATO kosei 加藤晃生） 日時：2020-05-21 17:41／2018/04/19 08:50 URL： https://twitter.com/kk_hirono/status/1263389416803856384 https://twitter.com/sd_tricks_kato/status/986753750911008769  

> なんでピンサロとか行かないんだろう？　霞が関から新橋の歓楽街なんか歩いてすぐじゃんね。 https://t.co/iPqHi5Lgec

@motoken_tw ===> You have been blocked from retweeting this user's tweets at their request.  
▷▷▷　次のツイートのアカウント（@motoken_tw）は，@kk_hironoをブロックしています。リツイートできませんでした。 ▷▷▷  

- TW motoken_tw（モトケン） 日時：2018/04/19 08:53 URL： https://twitter.com/motoken_tw/status/986754692469276672?ref_src=twsrc%5Etfw%7Ctwcamp%5Etweetembed%7Ctwterm%5E986754692469276672%7Ctwgr%5E&ref_url=http%3A%2F%2Fhirono2014sk.blogspot.com%2F2018%2F04%2Fmotokentw_51.html  

> @sd_tricks_kato それじゃあ、権力の甘き香りを味わえないじゃないですか。  

  - 甘き死よ、来たれ 神画質（フルHD） - YouTube https://www.youtube.com/watch?v=AnGpB_Wj3dQ  

　Bloggerのブログ記事でツイートのURLをコピーすると，URLにパラメーターが追加されていました。リンクを開くと同じURLで開くことはずっと前からわかっていました。これだと返信のツイートなどが表示されない場合があるので，投稿時刻のリンクで開き直しをします。

 - (3) モトケンさんはTwitterを使っています 「@sd_tricks_kato それじゃあ、権力の甘き香りを味わえないじゃないですか。」 / Twitter https://twitter.com/motoken_tw/status/986754692469276672  

 　（３）とあるのはアカウントの通知の数です。YouTubeでも同様に通知の数が取得したページタイトルに含まれます。事前に通知を開いて消すこともあるのですが，忘れることも多いです。できれば勘弁してもらいたい仕様です。

 　さきほどYouTubeの「甘き死よ，来たれ」を視聴していたタイミングだったと思いますが，テレビに森まさこ法務大臣の会見が出ていました。黒川弘務検事長の賭け麻雀で辞職の問題です。そのあと野党が森まさこ法務大臣の責任追及をするというニュースもありました。

 　自民党内部にこのままでは秋まで政権が持たない，という声もあると解説をしていました。ミヤネ屋の後，チャンネルを変えておらず，となりのテレ金ちゃん，の放送中の全国ニュースのコーナーになります。テロップが見えないですが，前はeveryになっていました。

 　リモコンの番組表で確認をしたのですが，ほぼ「となりのテレ金ちゃん」とだけ情報がありました。前はテロップの一部にeveryと表示があったように思います。全く変わりはないと思うのですが，4月から番組構成が変わったのかと考えました。

  - となりのテレ金ちゃん［字］ - Gガイド.テレビ王国 https://tv.so-net.ne.jp/schedule/134832202005211753.action  

  ```
番組情報
となりのテレ金ちゃん［字］　ウェブ検索
5/21 (木) 17：53 ～ 19：00 （67分） この時間帯の番組表
テレビ金沢(Ch.4)
ニュース／報道 - ローカル・地域 , ドキュメンタリー／教養 - 社会・時事 , 情報／ワイドショー - その他
番組概要
▽県内ニュースを解説!(他)

番組詳細
 

HD 16：9 コピー可
人名リンク


［source：］となりのテレ金ちゃん［字］ - Gガイド.テレビ王国 https://tv.so-net.ne.jp/schedule/134832202005211753.action
```

　そういえば，18時15分から石川県内ニュースという女子アナの声が入ることのある「となりのテレ金ちゃん」です。金曜日は「花のテレ金ちゃん」だったと思います。ミヤネ屋が終わり，短い石川県内ニュースが終わった後の始まりからずっとみているのは久しぶりです。

　時刻は18時12分です。さきほどからテレビに安倍首相が話をしていて，この入力の途中に今終わったところです。弁護士の中には検察庁の定年延長法案で不利な状況になった安倍首相が，わざと黒川弘務検事長に辞職になることをさせ幕引きを図ったようにツイートしていました。

　18時から石川県内ニュースになっていますが，安倍首相が会見をしていたので全国ニュースが延長になるのかとも考えていました。

　さきほどエヴァンゲリオンや「甘き死よ，来たれ」のことも「さらば弁護士鉄道」のモチーフになっているように考え始めていたところ，先日，金沢弁護士会会長になった宮西香弁護士の弁護士ドットコムの記事に，宮沢賢治のファンで全集を持っているような記載があったことを思い出しました。

　「pp -p|grep 2019-05-05」という方法で再度試みたのですが，スクリーンショットとテレビ画面の撮影以外は見当たらなかったものの，思いがけない発見がありました。喜久山大貴弁護士のツイートですが，これは別のエントリーとして取り上げ記録します。

　昨夜だったかも余り開くことのない喜久山大貴弁護士のTwitterをブックマークから開いたところ，喜久山大貴弁護士本人のツイートではなかったように思いますが，けっこう大きめの発見がありました。内容が思い出せないのですが，時間が近接しているのですぐに見つかるはずです。

 - 2019年5月5日にバイクで行った七尾市の青柏祭，10年ぶりの羽咋市内，気多大社，妙成寺，羽咋市のゴミ処理場 - Google フォト https://photos.google.com/share/AF1QipML3DuzlFN2zdhhzCQvPNEM0it7Luilrb4tLGaL31ErOAcCbPQUgrk5aYG2Sta1iQ?key=dHpLNW5ic05rY09fcGlyUVNNTGZrM0gtS0pCc3lB  

 　時刻は20時55分になります。また，予定外の発見があり，深澤諭史弁護士のタイムラインでみた中村剛弁護士のツイートで，「男の花道」という言葉を思い出し，それを調べていると，「神奈川水滸伝」という北島三郎の曲が，映画のテーマ曲だったと知りました。

 　昨夜もテレビで見たと思うのですが，カルロス・ゴーン氏の逃走を幇助したアメリカ人2人がアメリカで逮捕されたというニュースがありました。小さな扱いのニュースで，Twitterを含めネットでは情報を見ていないように思います。まだ調べてもいません。

 　そちらも記録として記述をしておきたいところなのですが，もともと「神奈川水滸伝」という曲には思い出があって，小田原市の村松謙弁護士のツイートを読んでいると情感を伴って思い出すことがあり，キーワードに残るようなツイートもしているかもしれません。

 

### 2019年5月5日に記録されていた喜久山大貴弁護士の「犬のうんこ拾う紙にちょうどいい」というツイート，天皇陛下即位をお祝いする京都新聞に向けたもので，懲戒請求もされていた様子

:CATEGORIES: 喜久山大貴弁護士

　一月ほど前になるのか，いつの間にか非公開設定から公開設定に戻っていた京都の喜久山大貴弁護士のTwitterですが，更新も少ない様子で，余りブックマークから開かずにいました。

 - 2019-05-05-232731_喜久山大貴さんのツイート：　”犬のうんこ拾う紙にちょうどいい…　”.jpg  http://hirono2014sk.blogspot.com/2019/05/2019050815482019-05-04-1338072019-05-08.html#20190505232731
 - 2019-05-05-233639_喜久山大貴（@kikuyamahiroki）：　裁判官には皇居かどこかにお呼ばれして天皇とテニスをする機会があって、昔それに参加したという話を自慢のよう.jpg  http://hirono2014sk.blogspot.com/2019/05/2019050815482019-05-04-1338072019-05-08.html#20190505233639
 - 2019-05-05-233942_喜久山大貴さんのツイート：　”警察がいつもやってることやん…　”.jpg  http://hirono2014sk.blogspot.com/2019/05/2019050815482019-05-04-1338072019-05-08.html#20190505233942

　そういえば，昨日の夕方遅く，銭湯で浴場からあがったタイミングで，気になったテレビをしばらく観ていたのですが，そのうち外国のポルターガイスト現象の映像を紹介していました。

　本当はあまり気になるような番組ではなかったのですが，リーガルハイという弁護士ドラマで主役の弁護士役だった堺雅人がバラエティ番組に出ているのかと思い，最初はそれを確認するつもりで画面を見ていたのです。

　家に戻ってからネットで調べたところ，その番組に堺雅人が出演という情報はなく，もともと少し微妙に感じていたのですが，別人の出演者だったようです。

　リーガルハイは自分にとって特別な弁護士ドラマであったので，これも個別に取り上げ記録をしておこうと思います。銭湯のテレビでは，これまでも絶妙なタイミングでの発見が何度かあり，前から気になっていました。


# 2020年

## 5月

### 2020年5月20日の20時台，銭湯のテレビで気になった弁護士ドラマ，リーガルハイの俳優堺雅人と，同じ番組でみた外国のポルターガイスト現象

:CATEGORIES: テレビ番組

 - 2020-05-20_202008＿銭湯のテレビ.jpg \n 2020-05-20_202137＿銭湯のテレビ　たぶんリーガルハイの堺雅人かと思った出演者.jpg \n 2020-05-20_202204＿銭湯のテレビ.jpg https://t.co/Vy6OlZ6Xik

 - 2020-05-20_202225＿銭湯のテレビ.jpg \n 2020-05-20_202709＿銭湯のテレビ　アイルランドのポルターガイスト現象の映像.jpg \n 2020-05-20_205048＿自宅のテレビ　谷本正憲石川県知事.j… https://t.co/YLkMFnbgvv

　次に奉納＼さらば弁護士鉄道・泥棒神社の物語(@hirono_hideki)に投稿した関連ツイートをリツイートします。

### 2020年5月22日，深澤諭史弁護士のタイムラインでみた金岡繁裕弁護士（愛知県弁護士会）のブログ記事と，NHKのテレビの尾西信用銀行の新型コロナウィルス対応で色々考えたこと

#### なぜかレベル4まで扱えるようになった様子のVimのVOomプラグイン，と思ったら違っていた

　レベル2から間違えてレベル4にしていたので，レベル4の見出しが扱えるようになっていたのかもしれません。新規のこの見出しは見出しの一覧に表示されなくなっていますが，この本文を入れた状態で再確認をしてみます。

　やはりVimのVoomプラグインで見出しのレベル4は扱えないようです。オプションの指定でなんとかできそうに思っていたのですが，これまで調べた範囲でできそうな情報は見ていません。レベル3までが当然のような情報のみを見ています。

　Vimでファイルを開くと，そのあとでVOomプラグインを実行する「Voom markdown」というコマンドを実行する必要があったのですが，次のようにすることでプラグインを実行した状態でファイルが開けるようになりました。

```
vi -c 'Voom markdown' /home/a66/git/gh2020kk/金沢西警察署/ブロクの削除を求められた金沢西警察署の対応，珠洲警察署能登庁舎での聴取/事実経過.md
```

　「:e!」というファイルを再読込するコマンドも「:q」で一度，Voomプラグインを終了させてから行う必要があるようです。これだと，Emacsでファイルを開き，自作のコマンドでレベル4をコピーした方が効率的かもしれません。

　単純な，Emacs-Lispで自作したコマンドというか関数になりますが，直近の先頭行がMarkdownの記号に始まる位置から次の見出しの直前，あるいはファイルの最後までをクリップボードにコピーする操作になります。

 - Vimを起動した後に指定したコマンドを自動で実行させる方法 - Qiita https://qiita.com/s-show/items/ddcc3a83c64dda8e4332  

#### 未だに見つからないレベルに関わりなくMarkdownで見出しと本文をコピーするプラグイン，以前作成した，不完全なEmacs-Lispのコマンド

:CATEGORIES: Markdown,Emacs,Emacs-Lisp

　すでにご紹介しているVimエディタのVOomプラグインではレベル3までの見出しのコピー，切り取りが出来ます。Atom，SublimeText，VSCodeという多機能エディタだけではなく，その他のアプリを試しても普通に見出しのコピーが出来るものが見つからないのです。

　Markdownの見出しレベルに関わりのない現在の見出しのコピーは早い段階で，EmacsのEmacs-Lisp関数で出来るものを作っています。処理は単純で，先頭行に半角の＃の記号があることが全ての条件になります。次がそのEmacs-Lispのコードになります。

```
(defun h-markdown-region-copy ()
  (interactive)
  (save-excursion
    (let ((bsp  nil) (bep nil))
      (re-search-backward  "^#.+" nil t)
      (setq bsp (point))
      (forward-line 1)
      (if (re-search-forward  "^#.+" nil t)
	  (progn
	    (forward-line -1)
	    (setq bep (point)))
	(progn
	  (goto-char (point-max))
	  (setq bep (point))))
      (message (format "%s TEXT copy! %s" bsp bep))
      (copy-region-as-kill bsp bep)
       )))
;; (defun h-markdown-region-copy ()
;;   (interactive)
;;   (save-excursion
;;     (let ((bsp  nil) (bep nil) (title nil))
;;       (re-search-backward  "^#.+" nil t)
;;       (setq bsp (point))
;;       (setq title (buffer-substring (point-at-bol) (point-at-eol)))
;;       (string-match "^\\(#+\\) .+" title)
;;       (setq len (length (match-string 1 title)))
;;       (forward-line 1)
;;       (setq p (format "^#\\\\{1,%d\\\\}? .+" len))
;;       (if (re-search-forward  p nil t)
;;           (progn
;;             (forward-line -1)
;;             (setq bep (point)))
;;         (progn
;;           (goto-char (point-max))
;;           (setq bep (point))))
;;       (message (format "%s TEXT copy! %s" bsp bep))
;;       (message title)
;;       (copy-region-as-kill bsp bep)
;;        )))
```

　コメントアウトで無効化したコードを残していますが，これは見出しのレベルを判別して下位の階層を含めてコピーしようとしたものです。つまりレベル２をコピーするとき含まれるレベル３，そのしたのレベル４もまとめてコピーしようとしたものです。

　繰り返しになりますが，これはVimエディタのVOomというプラグインを使うことで，レベル３までの階層を，その下位の階層を含めてコピー，切り取りできるようになっています。

　常に下位を含まない直近の見出しの範囲のコピーになります。間違って行頭に半角の＃を置かないようにすれば問題ないのですが，これまでもプログラムのコードのコピペに，コードのコメントアウトを意味する半角の＃が含まれていて，意図しない操作になることはありました。

#### 徹夜をしたが解決ができなかったVSCodeのプラグイン開発でのTypeScriptによる複数のコマンドの処理，実行

:CATEGORIES: VSCode,TypeScript,プラグイン

　VSCodeでのプラグイン開発の初歩になりますが，情報が見つからず，長い時間を掛けましたが未だ解決できずにいます。TypeScriptの勉強から始める必要性を感じたのですが，本日少し調べただけでも思いがけない意外な発見がありました。

　次がVSCodeでのTypeScriptによるプラグイン開発の基本形になると思うのですが，実装，公開されたコードを読むと書式にずいぶん違いを感じています。基本形の応用になるのか，他に定義した関数を読み出すかたちで，関数の数だけ処理を振り分けることができるようです。

>||
    const newLocal = vscode.commands.registerCommand('extension.getTweetInsert', () => {
        vscode.window.showInformationMessage("start script");
    });

    context.subscriptions.push(newLocal);
||<

 export function activate(context: vscode.ExtensionContext) {というメイン関数と思われる中に，同じ形式の context.subscriptions.push(newLocal);を実行したのですが，１つ目しか有効になりません。

　TypeScriptの処理の実現という結果を求めすぎず基礎から勉強の必要を感じたのですが，情報収集としての英語の読解力の必要性もこれまで以上に痛感し，しんどい思いをしながら時間を無駄にしたことを噛み締めたところであります。

　TypeScriptとjavascriptの違い，node.js，npmコマンドとの関係についても少しずつ理解が深まってきました。これを使いこなせるようになっていけば，パソコンの活用の幅もさらに広がることになりますし，役立つという目的意識も強まってきました。

　やはりTypeScriptはまだ新しいプログラム言語で，日本語の情報は少ないということもネットで調べてみかけました。VSCodeがMicrosoftの開発ということは知っていましたが，TypeScriptもMicrosoftの開発だと知って驚いたところです。

　私はLinuxのプラットホームでVSCodeを使っていますが，Microsoftの他の製品とはずいぶんと違いを感じています。基本となる考えがオープンソースにあるのかとも考えますが，この勉強はVBAや他のMicrosoftの製品の活用，開発にも役立つはずです。

#### 2020年5月22日，VSCodeとTypeScriptについて調べ，参考にした記事，情報

:CATEGORIES: VSCode,TypeScript

▶▶▶　kk_hironoのリツイート　▶▶▶  

- RT kk_hirono（再捜査要請書＿警察庁・石川県警察御中）｜hirono_hideki（奉納＼さらば弁護士鉄道・泥棒神社の物語） 日時：2020-05-23 00:04／2020/05/22 00:20 URL： https://twitter.com/kk_hirono/status/1263848153217822727 https://twitter.com/hirono_hideki/status/1263489731242807296  

> Node.jsで標準出力に文字列を出力する | 情報アイランド https://t.co/fjaevAKFOB  

▶▶▶　kk_hironoのリツイート　▶▶▶  

- RT kk_hirono（再捜査要請書＿警察庁・石川県警察御中）｜hirono_hideki（奉納＼さらば弁護士鉄道・泥棒神社の物語） 日時：2020-05-23 00:04／2020/05/22 00:48 URL： https://twitter.com/kk_hirono/status/1263848180015218689 https://twitter.com/hirono_hideki/status/1263496856836833280  

> Node.js入門４　条件分岐(if, else, switch) - Symfoware https://t.co/GbYpbHEA2o  

▶▶▶　kk_hironoのリツイート　▶▶▶  

- RT kk_hirono（再捜査要請書＿警察庁・石川県警察御中）｜hirono_hideki（奉納＼さらば弁護士鉄道・泥棒神社の物語） 日時：2020-05-23 00:04／2020/05/22 01:30 URL： https://twitter.com/kk_hirono/status/1263848205617254401 https://twitter.com/hirono_hideki/status/1263507345318936577  

> TypeScriptを対話形式で実行する方法 - Qiita https://t.co/z7s3SFbtV0  

▶▶▶　kk_hironoのリツイート　▶▶▶  

- RT kk_hirono（再捜査要請書＿警察庁・石川県警察御中）｜hirono_hideki（奉納＼さらば弁護士鉄道・泥棒神社の物語） 日時：2020-05-23 00:04／2020/05/22 02:08 URL： https://twitter.com/kk_hirono/status/1263848226563620864 https://twitter.com/hirono_hideki/status/1263516986874589185  

> disposable 意味 - Google 検索 https://t.co/u28ArhN8IJ  

▶▶▶　kk_hironoのリツイート　▶▶▶  

- RT kk_hirono（再捜査要請書＿警察庁・石川県警察御中）｜hirono_hideki（奉納＼さらば弁護士鉄道・泥棒神社の物語） 日時：2020-05-23 00:04／2020/05/22 02:41 URL： https://twitter.com/kk_hirono/status/1263848249426800640 https://twitter.com/hirono_hideki/status/1263525211648847872  

> VSCodeのExtensionを作ってみた https://t.co/2DgfjsvfhB  

▶▶▶　kk_hironoのリツイート　▶▶▶  

- RT kk_hirono（再捜査要請書＿警察庁・石川県警察御中）｜hirono_hideki（奉納＼さらば弁護士鉄道・泥棒神社の物語） 日時：2020-05-23 00:04／2020/05/22 03:55 URL： https://twitter.com/kk_hirono/status/1263848278778474496 https://twitter.com/hirono_hideki/status/1263544003976327169  

> Visual Studio CodeのExtensionのコードを読む (TS/JS postfix completion) – なんてこったいブログ https://t.co/fr5DQZczpk  

▶▶▶　kk_hironoのリツイート　▶▶▶  

- RT kk_hirono（再捜査要請書＿警察庁・石川県警察御中）｜hirono_hideki（奉納＼さらば弁護士鉄道・泥棒神社の物語） 日時：2020-05-23 00:04／2020/05/22 06:43 URL： https://twitter.com/kk_hirono/status/1263848327503704064 https://twitter.com/hirono_hideki/status/1263586179955359747  

> まだVSCode拡張機能探しで消耗してるの？　VSCodeの拡張機能は意外と簡単につくれるよ！！ - Qiita https://t.co/AWhsaYTyOC  

▶▶▶　kk_hironoのリツイート　▶▶▶  

- RT kk_hirono（再捜査要請書＿警察庁・石川県警察御中）｜hirono_hideki（奉納＼さらば弁護士鉄道・泥棒神社の物語） 日時：2020-05-23 00:05／2020/05/22 12:20 URL： https://twitter.com/kk_hirono/status/1263848430285152256 https://twitter.com/hirono_hideki/status/1263671070709579776  

> contains - Google 検索 https://t.co/5HZaWtas6T  

▶▶▶　kk_hironoのリツイート　▶▶▶  

- RT kk_hirono（再捜査要請書＿警察庁・石川県警察御中）｜hirono_hideki（奉納＼さらば弁護士鉄道・泥棒神社の物語） 日時：2020-05-23 00:05／2020/05/22 14:51 URL： https://twitter.com/kk_hirono/status/1263848522769522689 https://twitter.com/hirono_hideki/status/1263709077017784320  

> TypeScriptを入門者向けに解説！JavaScriptとの違い…｜Udemy メディア https://t.co/NU4lqTsTP8  

▶▶▶　kk_hironoのリツイート　▶▶▶  

- RT kk_hirono（再捜査要請書＿警察庁・石川県警察御中）｜hirono_hideki（奉納＼さらば弁護士鉄道・泥棒神社の物語） 日時：2020-05-23 00:05／2020/05/22 16:48 URL： https://twitter.com/kk_hirono/status/1263848572178464769 https://twitter.com/hirono_hideki/status/1263738535774838784  

> Node.js入門 - とほほのWWW入門 https://t.co/YD5Y9kFx5W $ curl http://127.0.0.1:8080/ Hello world!  

▶▶▶　kk_hironoのリツイート　▶▶▶  

- RT kk_hirono（再捜査要請書＿警察庁・石川県警察御中）｜hirono_hideki（奉納＼さらば弁護士鉄道・泥棒神社の物語） 日時：2020-05-23 00:06／2020/05/22 17:18 URL： https://twitter.com/kk_hirono/status/1263848633520148486 https://twitter.com/hirono_hideki/status/1263745924259442689  

> 仕事ですぐに使えるTypeScript — 仕事ですぐに使えるTypeScript ドキュメント https://t.co/WMH7pDBbb8  

　Twilogからリツイートをしたのですが，やはり寝た時間は朝の7時を過ぎたぐらいで，目が覚めて起きたのが9時30分頃でした。疲れを感じて頭もすっきりしなかったのですが，やはり寝不足だったのかと納得です。

#### きっかけはVSCodeでツイートの読み込みをやろうとしたこと，不具合があったRubyのスクリプト，その問題も2020年5月22日に解決

:CATEGORIES: VSCode,プラグイン開発,Ruby

　今現在，Emacsで作業をしているのですが，5月21日日になるのかVSCodeで編集作業に専念していたところ，ツイートの読み込みに手間がかかり，作業効率の悪さを痛感しました。時間の無駄ということです。

　普通にブラウザを使い再捜査要請書＿警察庁・石川県警察御中（@kk_hirono）のアカウントでツイートを行い，そのツイートをTwitterAPIで読み込んで編集中のファイルに書き込んでいるのですが，事前に自作コマンドを実行して読み込みツイートの数をリセットしています。

　これも自分の工夫でやっていることなので我流になります。次がそのコマンドの実行と実行結果になります。以前のツイートのカウント数をテキストファイルに記録し，次に同じコマンドを実行した時とのツイート数の差分を表示させる処理としています。

```
[4793]  % tweet_user_count.rb 
kk_hirono
再捜査要請書＿警察庁・石川県警察御中（kk_hirono）
ユーザ名称：再捜査要請書＿警察庁・石川県警察御中 [screen_name]ユーザ名：kk_hirono フォロー数：551 フォロワー数：566 ツイート数：100185
6
```

　結果は６となっています。このあとブラウザなどでツイートの投稿をし，次に編集中のテキストファイルからTwitterAPIで投稿処理をする直前のタイミングで，外部でツイートされ，テキストファイルに存在しないツイートの数を確認することになります。

　今のところEmacsとVim以外には見たことがないのですが，コマンドを実行する際の前置引数という操作があります。Emacs-Lispのコマンドではこの前置引数を使うことが出来るのでとても便利になります。

　私の場合，メインの再捜査要請書＿警察庁・石川県警察御中（@kk_hirono）のアカウントのツイートを最新のものから読み込むコマンドをF11のキーに割り当てています。前置引数はC-uに続く数値です。それに続けてF11を押すことで，指定した数のツイートを読み込みます。

　いちおう調べているのですが，SublimeTextやVSCodeではこの前置引数の情報が見当たりませんでした。Emacs-Lispの自作コマンドで，外部のスクリプトを読み出しているのですが，その引数を前置引数で渡していることになります。

　同じコマンドを通常のターミナルで行う場合は，「tl_kk 5」などとなります。この5という仮定の数値が，コマンドの引数で指定するツイートの数になります。

　一月ほど前までは，ほとんどEmacsで作業をしていたので，前置引数と自作のEmacs-Lispの関数を使っていたのですが，Emacs以外での作業がメインとなるため，Emacs-Lispで呼び出していたスクリプトのコマンドを修正し，出力をクリップボードに保存するようにしました。

　これが失敗していたのですが，最近になって他にもクリップボード絡みの不具合と修正を迫られることがあって，システムの変更が原因なのかとも考えていたのです。結局は，コードの記述に問題があって思うような処理が出来ていなかったらしく，修正することで解決が出来ました。

　直近の５つのツイートを貼り付けるときは，ターミナルで「tl_kk 5」というコマンドを実行することになります。これでクリップボードに結果のテキストが入るので，あとはテキストを挿入する場所で貼り付けを行うだけです。

　Emacsの場合はCtrl+yになりますが，ほとんどの場合はCtrl+vが貼り付けのキーボード操作になります。「tl_kk 5」の事前の実行は，範囲選択やコピーという通常の操作の手間を省けます。これも頻度が増えたり，コピーの範囲の数が多いと馬鹿にならない手間になります。

　Ubuntuのバージョンが20.04になってからだと思うのですが，Emacsの文字の表示が見づらくなりました。文字が大きめになり，行間がかなり広がっているように感じます。画面サイズを含めフォントの大きさも以前の設定が反映されなくなっているようです。

　細かいことは気にしない方の正確だと思いますが，細かいことが気になって意識が集中しづらくなることもあります。日本語の変換候補がミニバッファのインライン表示に出来るEmacsが特に使いやすくもあるのですが，他のエディタにも利点はあります。

　逆に高機能のエディタが不便に感じることもあって，SublimeTextもVSCodeも同じだと思うのですが，ファイルの変更が見た目でわからなくなっています。EmacsではSaveというアイコンが保存済みで薄い色に変わります。

　SublimeTextやVSCodeでは，ファイルの保存をしなくても終了した後の再開で以前の編集状態で読み込むようになっているようです。Wordのような自動保存とは違うようですが，逆にEmacsなどの別のエディタでファイルを開くと，編集が未保存の状態で読み込まれたりします。

　Emacsでは編集中の行数が分からず，設定をしても日本語の文字数ではないバイト数で表示されるようです。これも自作のコマンドで対処はしているのですが，ステータスバーですぐに確認できる文字数ではありません。

　Caps+hというキーに割り当てているのですが，ずいぶん前に作ったEmacs-Lispで，コードの内容もさっぱり思い出せません。EmacsではC-h kとやってから調べたいキーを押すことで，割り当てたコマンドだけではなく，ファイルのコードにジャンプすることまで出来ます。

```
<eisu-toggle> h runs the command h-count-line (found in global-map),
which is an interactive Lisp function in ‘h-elisp.el’.

It is bound to <eisu-toggle> t, <eisu-toggle> h.

(h-count-line)

Not documented.

[back]
```

　上記の’h-elisp.el’という部分がコマンドの関数の記述のあるファイルで，リンクを開くことでそのファイルの中の関数の部分にジャンプします。その関数の内容は次の通りになっています。

```
(defun h-count-line ()
  (interactive)
  (save-excursion
    (beginning-of-line)
    (let ((s (point))
          (e nil))
      (end-of-line)
      (setq e (point))
      (message "現在行には、%d文字あります。" (- e s)))))
```

　Emacsではカーソル位置を含め，ファイルの先頭からの位置がpointという関数にもなっているのですが，行末のポイントから行とのポイントを引いた数となっていました。

　このファイル内の文字位置の操作は，WordのVBAを始め，Atom，SublimeText，VSCodeと共通してとてもややこしい面倒な操作となっています。ネットで調べても情報が少なく，調べるだけでもずいぶんと時間を費やしてしまいました。

　これをみてもEmacsではバイト数に関わりなく半角も全角も同じ1文字として扱っているようですが，日本語の取り扱いでもとても便利に感じるのがEmacsになります。逆に日本を扱わないプログラムのコードの場合は，Vimなど他のエディタを使うことが多いです。

　テキストエディタでは次の改行までという行の概念が当たり前なのですが，Wordなどのワープロソフトでは段落という概念や見た目の行の折返しが優先され，非常に扱いづらさを感じます。見た目の折返しに何の意味があるのか不思議で理解ができません。

　探せば他に方法があるのかもしれないですが，VSCodeではキーボードの割当が，キーではなく割り当てるコマンドが主体となっているようです。行のテキストをツイートするキーをF12の他F9にも割り当てたかったのですが，方法が見つかりませんでした。




